!function(){angular.module("app",["routes","services"])}(),function(){var e=angular.module("routes",["ngRoute"]);e.config(["$routeProvider",function(e){e.when("/",{controller:"AccountCtrl",templateUrl:"app/areas/account/views/index.html"}).when("/home",{controller:"HomeCtrl",templateUrl:"app/areas/home/views/index.html"}).otherwise({controller:"HomeCtrl",templateUrl:"404.html"})}])}(),function(){var e=angular.module("services",[]);e.factory("User",function(){return{get:function(){return angular.fromJson(sessionStorage.getItem("user"))},set:function(e){sessionStorage.setItem("user",JSON.stringify({username:e}))}}})}(),function(){"use strict";function e(e,t,o){e.title="Login",e.login=function(e,n){return"admin"!=e&&"company"!=e||"123"!=n?(toastr.error("Login e senha inválidos"),!1):(o.set(e),t.path("/home"),!0)}}e.$inject=["$scope","$location","User"],angular.module("app").controller("AccountCtrl",e)}(),function(){"use strict";function e(e,t,o){function n(t){var o=e.invoice.amount*(t.percent/100);return e.invoice.amount>5e3||o>t.withheldGratherThan?o:0}e.invoiceReset=function(){e.invoice={amount:0,withheld:0,total:0}},e.invoicesLSSave=function(){localStorage.setItem("invoices"+e.user.username,JSON.stringify(e.invoices))},e.invoicesSave=function(t){return 0===t.amount?void toastr.error("Preencha os dados desta nota"):(t.dateTime=new Date,e.invoices.push(t),e.invoicesLSSave(),e.invoiceReset(),void toastr.success("A nota foi incluída no histórico"))},e.invoicesClear=function(){e.invoices=[],localStorage.removeItem("invoices"+e.user.username)},e.invoicesLoad=function(){var t=angular.fromJson(localStorage.getItem("invoices"+e.user.username));e.invoices=null!==t?t:[]},e.invoicesRemove=function(t){var o=e.invoices.indexOf(t);e.invoices.splice(o,1),e.invoicesLSSave()},e.taxesLoad=function(){var t=angular.fromJson(localStorage.getItem("taxes"));null===t&&(t=[{code:"IR",percent:1.5,active:!0,withheldGratherThan:10},{code:"PIS",percent:1.65,active:!0},{code:"COFINS",percent:3,active:!0},{code:"CSLL",percent:4,active:!0}]),e.taxes=t},e.taxesSave=function(){localStorage.setItem("taxes",JSON.stringify(e.taxes)),toastr.success("Taxas salvas com sucesso!")},e.calculator=function(){e.invoice.withheld=0,angular.forEach(e.taxes,function(t){t.withheld=t.active?n(t):0,e.invoice.withheld+=t.withheld}),e.invoice.total=e.invoice.amount-e.invoice.withheld},e.init=function(){e.user=o.get(),null===e.user&&t.path("/"),e.title="Calculo de imposto retido",e.invoiceReset(),e.invoicesLoad(),e.taxesLoad(),e.calculator()},e.init()}e.$inject=["$scope","$location","User"],angular.module("app").controller("HomeCtrl",e).directive("taxes",function(){return{templateUrl:"app/areas/home/diretives/taxes.html"}}).directive("calculator",function(){return{templateUrl:"app/areas/home/diretives/calculator.html"}}).directive("history",function(){return{templateUrl:"app/areas/home/diretives/history.html"}})}();